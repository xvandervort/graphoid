# Simple HTML Parsing Demo
# Basic demonstration of HTML parsing capabilities

import "html_parser" as html

print("ğŸŒ Simple HTML Parsing Demo")
print("===========================")

# Simple HTML content
string simple_html = "<div><h1>Bitcoin Price: $67,891</h1><p class=\"price\">Current: $67,891.23</p><a href=\"/bitcoin\">More Info</a></div>"

print("ğŸ“„ Sample HTML: " + simple_html)

# Parse the HTML
print("\nğŸ” Parsing HTML...")
elements = html.parse(simple_html)
print("âœ… Parsed successfully!")
print("ğŸ“Š Found " + elements.size().to_string() + " root elements")

# Find elements by tag
print("\nğŸ¯ Finding elements by tag...")
h1_elements = html.find_by_tag(elements, "h1")
print("ğŸ“ Found " + h1_elements.size().to_string() + " h1 elements")

p_elements = html.find_by_tag(elements, "p")
print("ğŸ“ Found " + p_elements.size().to_string() + " p elements")

a_elements = html.find_by_tag(elements, "a")
print("ğŸ”— Found " + a_elements.size().to_string() + " link elements")

# Find elements by class
print("\nğŸ” Finding elements by class...")
price_elements = html.find_by_class(elements, "price")
print("ğŸ’° Found " + price_elements.size().to_string() + " price elements")

# Find elements containing text
print("\nğŸ’¬ Finding elements containing text...")
bitcoin_elements = html.find_containing_text(elements, "Bitcoin")
print("â‚¿ Found " + bitcoin_elements.size().to_string() + " elements mentioning Bitcoin")

dollar_elements = html.find_containing_text(elements, "$")
print("ğŸ’° Found " + dollar_elements.size().to_string() + " elements with dollar signs")

# Extract text from elements
print("\nğŸ“ Extracting text...")
if h1_elements.size() > 0 {
    first_h1 = h1_elements[0]
    h1_text = html.get_text(first_h1)
    print("ğŸ“„ H1 text: '" + h1_text + "'")
}

if p_elements.size() > 0 {
    first_p = p_elements[0]
    p_text = html.get_text(first_p)
    print("ğŸ“„ P text: '" + p_text + "'")
}

# Extract attributes
print("\nğŸ·ï¸ Extracting attributes...")
if a_elements.size() > 0 {
    first_a = a_elements[0]
    href = html.get_attribute(first_a, "href")
    print("ğŸ”— Link href: '" + href + "'")
}

if p_elements.size() > 0 {
    first_p = p_elements[0]
    class_attr = html.get_attribute(first_p, "class")
    print("ğŸ·ï¸ P class: '" + class_attr + "'")
}

# Extract links
print("\nğŸ”— Extracting all links...")
all_links = html.extract_links(elements)
print("ğŸ”— Found " + all_links.size().to_string() + " links total")

# Test HTML encoding/decoding
print("\nğŸ”§ Testing HTML encoding...")
test_text = "Price: $50,000 & rising!"
encoded = html.encode(test_text)
print("ğŸ“ Original: " + test_text)
print("ğŸ”’ Encoded: " + encoded)

decoded = html.decode(encoded)
print("ğŸ”“ Decoded: " + decoded)

print("\nâœ¨ Simple demo completed!")
print("ğŸ¯ HTML parsing is working correctly!")