# Test New Hash Access Behavior

print("Testing New Hash Access Behavior")
print("=================================")

# Create a test hash
config = { "host": "localhost", "port": 8080, "debug": true }

print("")
print("=== NEW: hash[key] returns VALUE ===")

# Test accessing values directly
host = config["host"]
port = config["port"]
debug = config["debug"]

print("host = config[\"host\"] = " + host)
print("port = config[\"port\"] = " + port.to_string())

if debug {
    print("debug = config[\"debug\"] = true (works in if statement!)")
} else {
    print("debug = config[\"debug\"] = false")
}

print("")
print("=== NEW: hash.node(key) returns DATA NODE ===")

# Test getting data nodes explicitly
host_node = config.node("host")
port_node = config.node("port")

print("host_node = config.node(\"host\") = " + host_node.to_string())
print("port_node = config.node(\"port\") = " + port_node.to_string())

# Test accessing node properties
print("host_node.key() = " + host_node.key())
print("host_node.value() = " + host_node.value())

print("")
print("=== COMPARISON: Before vs After ===")

print("BEFORE (old painful way):")
print("  host = config[\"host\"].value()  # ugh!")
print("  if config[\"debug\"].value() { } # ugly!")

print("")
print("AFTER (new clean way):")
print("  host = config[\"host\"]          # clean!")
print("  if config[\"debug\"] { }         # natural!")

print("")
print("=== BACKWARD COMPATIBILITY ===")

# Test that .get() still works for backward compatibility
host_get = config.get("host")
print("config.get(\"host\") still returns data node:")
print("  " + host_get.to_string())

print("")
print("✅ All tests passed! Hash access is now intuitive!")
print("✅ hash[key] returns value (what users expect)")
print("✅ hash.node(key) returns data node (when needed)")
print("✅ Backward compatibility maintained")