#!/usr/bin/env glang

# Basic test of variable keys in map literals

print("=== Variable Keys Basic Test ===")

# Test 1: Simple variable keys
name_key = "name"
age_key = "age"

# Create map using variable keys - This should work now!
person = { name_key: "Alice", age_key: 30 }

print("Created person with variable keys:")
print("Name: " + person["name"])
print("Age: " + person["age"].to_string())

# Test 2: Dynamic DataFrame structure
cols = ["product", "price", "quantity"]
inventory = {
    "_type": "dataframe",
    "_columns": cols
}

# Initialize columns using variables
col1 = cols[0]
col2 = cols[1]
col3 = cols[2]

inventory[col1] = []
inventory[col2] = []
inventory[col3] = []

# Add data using variable keys in map literal
item1 = { col1: "Laptop", col2: 999.99, col3: 5 }
inventory[col1].append(item1[col1])
inventory[col2].append(item1[col2])
inventory[col3].append(item1[col3])

print("DataFrame created with dynamic columns:")
print("Products: " + inventory["product"].to_string())
print("Prices: " + inventory["price"].to_string())
print("Quantities: " + inventory["quantity"].to_string())

print("âœ… Variable keys working perfectly!")